%br
%br
.container
  %h1.col-md-8 Tasks
  .col-md-2
    -if params[:complete]
      = link_to "All", tasks_path
    -else
      = "All"
    |
    = link_to_unless_current "Incomplete", tasks_path(complete: false)
  .col-md-2
  = link_to 'Create Task', new_task_path, class: 'btn btn-info'
  %table.table
    %thead
      %tr
        -if params[:complete] == 'false'
          %th.col-md-6
            =link_to "Description", tasks_path(complete: false, sort_by: :description)
          %th.col-md-1
            =link_to "Complete"
          %th.col-md-2
            =link_to "Due", tasks_path(complete: false, sort_by: :due_date)
        -else
          %th.col-md-6
            =link_to "Description", tasks_path(sort_by: :description)
          %th.col-md-1
            =link_to "Complete", tasks_path(sort_by: :complete)
          %th.col-md-2
            =link_to "Due", tasks_path(sort_by: :due_date)
        %th{:colspan => "3"}
  %tbody
  - @tasks.each do |task|
    .col-md-12.panel
    %tr
      %td
        .col-md-6= task.description
      %td
        - if task.complete == true
          .col-md-1.glyphicon.glyphicon-check.btn
            -# =link_to complete_tasks_path(task), :method => :patch
        - else
          .col-md-1.glyphicon.glyphicon-unchecked.btn
            -# =link_to complete_tasks_path(task), :method => :patch
      %td
        .col-md-2= task.due_date
      %td
        .col-md-3
          = link_to 'Show', task, class: 'btn btn-primary'
          = link_to 'Edit', edit_task_path(task), class: 'btn btn-warning'
          = link_to 'Destroy', task, method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-danger'
%br/
